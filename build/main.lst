ARM GAS  C:\Users\dragos.nicolae\AppData\Local\Temp\ccaDiVu2.s 			page 1


   1              		.cpu cortex-m4
   2              		.eabi_attribute 27, 1
   3              		.eabi_attribute 28, 1
   4              		.eabi_attribute 20, 1
   5              		.eabi_attribute 21, 1
   6              		.eabi_attribute 23, 3
   7              		.eabi_attribute 24, 1
   8              		.eabi_attribute 25, 1
   9              		.eabi_attribute 26, 1
  10              		.eabi_attribute 30, 1
  11              		.eabi_attribute 34, 1
  12              		.eabi_attribute 18, 4
  13              		.file	"main.c"
  14              		.text
  15              	.Ltext0:
  16              		.cfi_sections	.debug_frame
  17              		.section	.text.debug_check,"ax",%progbits
  18              		.align	1
  19              		.global	debug_check
  20              		.syntax unified
  21              		.thumb
  22              		.thumb_func
  23              		.fpu fpv4-sp-d16
  25              	debug_check:
  26              	.LFB126:
  27              		.file 1 "Src/main.c"
   1:Src/main.c    **** 
   2:Src/main.c    **** /**
   3:Src/main.c    ****   ******************************************************************************
   4:Src/main.c    ****   * @file           : main.c
   5:Src/main.c    ****   * @brief          : Main program body
   6:Src/main.c    ****   ******************************************************************************
   7:Src/main.c    ****   */
   8:Src/main.c    **** 
   9:Src/main.c    **** /* Includes ------------------------------------------------------------------*/
  10:Src/main.c    **** #include "main.h"
  11:Src/main.c    **** 
  12:Src/main.c    **** /* Private variables ---------------------------------------------------------*/
  13:Src/main.c    **** 
  14:Src/main.c    **** /* USER CODE BEGIN PV */
  15:Src/main.c    **** /* Private variables ---------------------------------------------------------*/
  16:Src/main.c    **** 
  17:Src/main.c    **** /* USER CODE END PV */
  18:Src/main.c    **** 
  19:Src/main.c    **** /* Private function prototypes -----------------------------------------------*/
  20:Src/main.c    **** 
  21:Src/main.c    **** #include "main.h"
  22:Src/main.c    **** #include "stdint.h"
  23:Src/main.c    **** #include "init.h"
  24:Src/main.c    **** #include "Generic.h"
  25:Src/main.c    **** 
  26:Src/main.c    **** 
  27:Src/main.c    **** Measured_value_tst * CO2_measurement_pst = NULL;
  28:Src/main.c    **** u32 calc_adc_val_u32 = 0U;
  29:Src/main.c    **** u16 local_counter_u16 = 0U;
  30:Src/main.c    **** u8 uart_new_line_u8[2] = "\r\n";
  31:Src/main.c    **** 
ARM GAS  C:\Users\dragos.nicolae\AppData\Local\Temp\ccaDiVu2.s 			page 2


  32:Src/main.c    **** 
  33:Src/main.c    **** void debug_check(u32 *var_for_debug_pu32)
  34:Src/main.c    **** {
  28              		.loc 1 34 0
  29              		.cfi_startproc
  30              		@ args = 0, pretend = 0, frame = 16
  31              		@ frame_needed = 0, uses_anonymous_args = 0
  32              	.LVL0:
  33 0000 10B5     		push	{r4, lr}
  34              	.LCFI0:
  35              		.cfi_def_cfa_offset 8
  36              		.cfi_offset 4, -8
  37              		.cfi_offset 14, -4
  38 0002 84B0     		sub	sp, sp, #16
  39              	.LCFI1:
  40              		.cfi_def_cfa_offset 24
  41 0004 0446     		mov	r4, r0
  35:Src/main.c    **** 	HAL_Delay(DELAY_DEBUG);
  42              		.loc 1 35 0
  43 0006 0520     		movs	r0, #5
  44              	.LVL1:
  45 0008 FFF7FEFF 		bl	HAL_Delay
  46              	.LVL2:
  36:Src/main.c    **** 	u8 debug_msg_u8[10] = "";
  47              		.loc 1 36 0
  48 000c 0023     		movs	r3, #0
  49 000e 0193     		str	r3, [sp, #4]
  50 0010 0293     		str	r3, [sp, #8]
  51 0012 ADF80C30 		strh	r3, [sp, #12]	@ movhi
  37:Src/main.c    **** 	sprintf(debug_msg_u8,"%d", var_for_debug_pu32);
  52              		.loc 1 37 0
  53 0016 2246     		mov	r2, r4
  54 0018 0B49     		ldr	r1, .L3
  55 001a 01A8     		add	r0, sp, #4
  56 001c FFF7FEFF 		bl	sprintf
  57              	.LVL3:
  38:Src/main.c    **** 	HAL_UART_Transmit(&huart1,debug_msg_u8, 6U, HAL_MAX_DELAY);
  58              		.loc 1 38 0
  59 0020 0A4C     		ldr	r4, .L3+4
  60              	.LVL4:
  61 0022 4FF0FF33 		mov	r3, #-1
  62 0026 0622     		movs	r2, #6
  63 0028 01A9     		add	r1, sp, #4
  64 002a 2046     		mov	r0, r4
  65 002c FFF7FEFF 		bl	HAL_UART_Transmit
  66              	.LVL5:
  39:Src/main.c    **** 	HAL_UART_Transmit(&huart1,uart_new_line_u8, 2U, HAL_MAX_DELAY);
  67              		.loc 1 39 0
  68 0030 4FF0FF33 		mov	r3, #-1
  69 0034 0222     		movs	r2, #2
  70 0036 0649     		ldr	r1, .L3+8
  71 0038 2046     		mov	r0, r4
  72 003a FFF7FEFF 		bl	HAL_UART_Transmit
  73              	.LVL6:
  40:Src/main.c    **** 	HAL_Delay(DELAY_DEBUG);
  74              		.loc 1 40 0
  75 003e 0520     		movs	r0, #5
ARM GAS  C:\Users\dragos.nicolae\AppData\Local\Temp\ccaDiVu2.s 			page 3


  76 0040 FFF7FEFF 		bl	HAL_Delay
  77              	.LVL7:
  41:Src/main.c    **** }
  78              		.loc 1 41 0
  79 0044 04B0     		add	sp, sp, #16
  80              	.LCFI2:
  81              		.cfi_def_cfa_offset 8
  82              		@ sp needed
  83 0046 10BD     		pop	{r4, pc}
  84              	.L4:
  85              		.align	2
  86              	.L3:
  87 0048 00000000 		.word	.LC0
  88 004c 00000000 		.word	huart1
  89 0050 00000000 		.word	.LANCHOR0
  90              		.cfi_endproc
  91              	.LFE126:
  93              		.section	.text.air_quality_calc,"ax",%progbits
  94              		.align	1
  95              		.global	air_quality_calc
  96              		.syntax unified
  97              		.thumb
  98              		.thumb_func
  99              		.fpu fpv4-sp-d16
 101              	air_quality_calc:
 102              	.LFB128:
  42:Src/main.c    **** 
  43:Src/main.c    **** 
  44:Src/main.c    **** void get_co2_adc(Measured_value_tst * Measured_value_pst)
  45:Src/main.c    **** {
  46:Src/main.c    **** 	HAL_ADC_Start(&hadc1);
  47:Src/main.c    **** 	HAL_Delay(DELAY_DEBUG);
  48:Src/main.c    **** 	calc_adc_val_u32  += HAL_ADC_GetValue(&hadc1);
  49:Src/main.c    **** 	if (local_counter_u16 == NUMBER_OF_MEASUREMENTS)
  50:Src/main.c    **** 	   {
  51:Src/main.c    **** 	      LED_ON
  52:Src/main.c    **** 	      calc_adc_val_u32 = (calc_adc_val_u32 / NUMBER_OF_MEASUREMENTS);
  53:Src/main.c    **** 	      Measured_value_pst->measured_value_u16 = SUBSTRACT25PROCENT(calc_adc_val_u32);
  54:Src/main.c    **** 	      ++Measured_value_pst->measurmenet_counter_u16;
  55:Src/main.c    **** 	      calc_adc_val_u32 = 0U;
  56:Src/main.c    **** 	      local_counter_u16 = 0U;
  57:Src/main.c    **** 	      LED_OFF
  58:Src/main.c    **** 	      send_data_uart(&CO2_measurement_pst);
  59:Src/main.c    **** 	      air_quality_calc(&CO2_measurement_pst);
  60:Src/main.c    **** 		}
  61:Src/main.c    **** 	else
  62:Src/main.c    **** 	{
  63:Src/main.c    **** 	      ++local_counter_u16;
  64:Src/main.c    **** 	      HAL_Delay(DELAY_DEBUG);
  65:Src/main.c    **** 	}
  66:Src/main.c    **** 
  67:Src/main.c    **** 
  68:Src/main.c    **** }
  69:Src/main.c    **** 
  70:Src/main.c    **** void air_quality_calc(Measured_value_tst * Measured_value_pst)
  71:Src/main.c    **** {
 103              		.loc 1 71 0
ARM GAS  C:\Users\dragos.nicolae\AppData\Local\Temp\ccaDiVu2.s 			page 4


 104              		.cfi_startproc
 105              		@ args = 0, pretend = 0, frame = 0
 106              		@ frame_needed = 0, uses_anonymous_args = 0
 107              	.LVL8:
 108 0000 08B5     		push	{r3, lr}
 109              	.LCFI3:
 110              		.cfi_def_cfa_offset 8
 111              		.cfi_offset 3, -8
 112              		.cfi_offset 14, -4
  72:Src/main.c    **** 
  73:Src/main.c    **** 
  74:Src/main.c    **** 	if (Measured_value_pst->measured_value_u16 >= GREEN_AIR_LEVEL_MIN)
 113              		.loc 1 74 0
 114 0002 0388     		ldrh	r3, [r0]
 115 0004 9BB2     		uxth	r3, r3
 116 0006 B3F5B97F 		cmp	r3, #370
 117 000a 19D2     		bcs	.L11
  75:Src/main.c    **** 	{
  76:Src/main.c    **** 		HAL_UART_Transmit(&huart1, "GREEN AIR\r\n\n", 12U, HAL_MAX_DELAY);
  77:Src/main.c    **** 	}
  78:Src/main.c    **** 	else
  79:Src/main.c    **** 		if ((Measured_value_pst->measured_value_u16 >= GOOD_AIR_LEVEL_MIN) && (Measured_value_pst->measur
 118              		.loc 1 79 0
 119 000c 0388     		ldrh	r3, [r0]
 120 000e 9BB2     		uxth	r3, r3
 121 0010 B3F5AA7F 		cmp	r3, #340
 122 0014 04D3     		bcc	.L8
 123              		.loc 1 79 0 is_stmt 0 discriminator 1
 124 0016 0388     		ldrh	r3, [r0]
 125 0018 9BB2     		uxth	r3, r3
 126 001a B3F5B97F 		cmp	r3, #370
 127 001e 17D3     		bcc	.L12
 128              	.L8:
  80:Src/main.c    **** 		{
  81:Src/main.c    **** 			HAL_UART_Transmit(&huart1,"GOOD AIR\r\n\n", 11U, HAL_MAX_DELAY);
  82:Src/main.c    **** 		}
  83:Src/main.c    **** 		else
  84:Src/main.c    **** 			if ((Measured_value_pst->measured_value_u16 >= BAD_AIR_LEVEL_MIN) && (Measured_value_pst->measur
 129              		.loc 1 84 0 is_stmt 1
 130 0020 0388     		ldrh	r3, [r0]
 131 0022 9BB2     		uxth	r3, r3
 132 0024 B3F59C7F 		cmp	r3, #312
 133 0028 04D9     		bls	.L9
 134              		.loc 1 84 0 is_stmt 0 discriminator 1
 135 002a 0388     		ldrh	r3, [r0]
 136 002c 9BB2     		uxth	r3, r3
 137 002e B3F5AA7F 		cmp	r3, #340
 138 0032 15D3     		bcc	.L13
 139              	.L9:
  85:Src/main.c    **** 			{
  86:Src/main.c    **** 				HAL_UART_Transmit(&huart1,"BAD AIR\r\n\n", 10U, HAL_MAX_DELAY);
  87:Src/main.c    **** 			}
  88:Src/main.c    **** 			else
  89:Src/main.c    **** 				if  (Measured_value_pst->measured_value_u16 <= WORST_AIR_LEVEL_MAX)
 140              		.loc 1 89 0 is_stmt 1
 141 0034 0388     		ldrh	r3, [r0]
 142 0036 9BB2     		uxth	r3, r3
ARM GAS  C:\Users\dragos.nicolae\AppData\Local\Temp\ccaDiVu2.s 			page 5


 143 0038 B3F59C7F 		cmp	r3, #312
 144 003c 18D9     		bls	.L14
 145              	.LVL9:
 146              	.L5:
  90:Src/main.c    **** 				{
  91:Src/main.c    **** 					HAL_UART_Transmit(&huart1,"VERY BAD AIR! GO OUT!\r\n\n", 24U, HAL_MAX_DELAY);
  92:Src/main.c    **** 				}
  93:Src/main.c    **** 
  94:Src/main.c    **** 
  95:Src/main.c    **** }
 147              		.loc 1 95 0
 148 003e 08BD     		pop	{r3, pc}
 149              	.LVL10:
 150              	.L11:
  76:Src/main.c    **** 	}
 151              		.loc 1 76 0
 152 0040 4FF0FF33 		mov	r3, #-1
 153 0044 0C22     		movs	r2, #12
 154 0046 0E49     		ldr	r1, .L15
 155 0048 0E48     		ldr	r0, .L15+4
 156              	.LVL11:
 157 004a FFF7FEFF 		bl	HAL_UART_Transmit
 158              	.LVL12:
 159 004e F6E7     		b	.L5
 160              	.LVL13:
 161              	.L12:
  81:Src/main.c    **** 		}
 162              		.loc 1 81 0
 163 0050 4FF0FF33 		mov	r3, #-1
 164 0054 0B22     		movs	r2, #11
 165 0056 0C49     		ldr	r1, .L15+8
 166 0058 0A48     		ldr	r0, .L15+4
 167              	.LVL14:
 168 005a FFF7FEFF 		bl	HAL_UART_Transmit
 169              	.LVL15:
 170 005e EEE7     		b	.L5
 171              	.LVL16:
 172              	.L13:
  86:Src/main.c    **** 			}
 173              		.loc 1 86 0
 174 0060 4FF0FF33 		mov	r3, #-1
 175 0064 0A22     		movs	r2, #10
 176 0066 0949     		ldr	r1, .L15+12
 177 0068 0648     		ldr	r0, .L15+4
 178              	.LVL17:
 179 006a FFF7FEFF 		bl	HAL_UART_Transmit
 180              	.LVL18:
 181 006e E6E7     		b	.L5
 182              	.LVL19:
 183              	.L14:
  91:Src/main.c    **** 				}
 184              		.loc 1 91 0
 185 0070 4FF0FF33 		mov	r3, #-1
 186 0074 1822     		movs	r2, #24
 187 0076 0649     		ldr	r1, .L15+16
 188 0078 0248     		ldr	r0, .L15+4
 189              	.LVL20:
ARM GAS  C:\Users\dragos.nicolae\AppData\Local\Temp\ccaDiVu2.s 			page 6


 190 007a FFF7FEFF 		bl	HAL_UART_Transmit
 191              	.LVL21:
 192              		.loc 1 95 0
 193 007e DEE7     		b	.L5
 194              	.L16:
 195              		.align	2
 196              	.L15:
 197 0080 00000000 		.word	.LC1
 198 0084 00000000 		.word	huart1
 199 0088 10000000 		.word	.LC2
 200 008c 1C000000 		.word	.LC3
 201 0090 28000000 		.word	.LC4
 202              		.cfi_endproc
 203              	.LFE128:
 205              		.section	.text.send_data_uart,"ax",%progbits
 206              		.align	1
 207              		.global	send_data_uart
 208              		.syntax unified
 209              		.thumb
 210              		.thumb_func
 211              		.fpu fpv4-sp-d16
 213              	send_data_uart:
 214              	.LFB129:
  96:Src/main.c    **** 
  97:Src/main.c    **** void send_data_uart(Measured_value_tst * Measured_value_pst)
  98:Src/main.c    **** {
 215              		.loc 1 98 0
 216              		.cfi_startproc
 217              		@ args = 0, pretend = 0, frame = 16
 218              		@ frame_needed = 0, uses_anonymous_args = 0
 219              	.LVL22:
 220 0000 F0B5     		push	{r4, r5, r6, r7, lr}
 221              	.LCFI4:
 222              		.cfi_def_cfa_offset 20
 223              		.cfi_offset 4, -20
 224              		.cfi_offset 5, -16
 225              		.cfi_offset 6, -12
 226              		.cfi_offset 7, -8
 227              		.cfi_offset 14, -4
 228 0002 85B0     		sub	sp, sp, #20
 229              	.LCFI5:
 230              		.cfi_def_cfa_offset 40
 231 0004 0746     		mov	r7, r0
  99:Src/main.c    **** 	u8 uart_buffer_u8[10];
 100:Src/main.c    **** 
 101:Src/main.c    **** 	sprintf(uart_buffer_u8,"%d", Measured_value_pst->measured_value_u16);
 232              		.loc 1 101 0
 233 0006 0288     		ldrh	r2, [r0]
 234 0008 1C4E     		ldr	r6, .L19
 235 000a 3146     		mov	r1, r6
 236 000c 01A8     		add	r0, sp, #4
 237              	.LVL23:
 238 000e FFF7FEFF 		bl	sprintf
 239              	.LVL24:
 102:Src/main.c    **** 	HAL_UART_Transmit(&huart1,"CO2 V value= ", 13U, HAL_MAX_DELAY);
 240              		.loc 1 102 0
 241 0012 1B4C     		ldr	r4, .L19+4
ARM GAS  C:\Users\dragos.nicolae\AppData\Local\Temp\ccaDiVu2.s 			page 7


 242 0014 4FF0FF33 		mov	r3, #-1
 243 0018 0D22     		movs	r2, #13
 244 001a 1A49     		ldr	r1, .L19+8
 245 001c 2046     		mov	r0, r4
 246 001e FFF7FEFF 		bl	HAL_UART_Transmit
 247              	.LVL25:
 103:Src/main.c    **** 	HAL_UART_Transmit(&huart1,uart_buffer_u8, 3U, HAL_MAX_DELAY);
 248              		.loc 1 103 0
 249 0022 4FF0FF33 		mov	r3, #-1
 250 0026 0322     		movs	r2, #3
 251 0028 01A9     		add	r1, sp, #4
 252 002a 2046     		mov	r0, r4
 253 002c FFF7FEFF 		bl	HAL_UART_Transmit
 254              	.LVL26:
 104:Src/main.c    **** 	HAL_UART_Transmit(&huart1,uart_new_line_u8, 2U, HAL_MAX_DELAY);
 255              		.loc 1 104 0
 256 0030 154D     		ldr	r5, .L19+12
 257 0032 4FF0FF33 		mov	r3, #-1
 258 0036 0222     		movs	r2, #2
 259 0038 2946     		mov	r1, r5
 260 003a 2046     		mov	r0, r4
 261 003c FFF7FEFF 		bl	HAL_UART_Transmit
 262              	.LVL27:
 105:Src/main.c    **** 
 106:Src/main.c    **** 	sprintf(uart_buffer_u8,"%d", Measured_value_pst->measurmenet_counter_u16);
 263              		.loc 1 106 0
 264 0040 7A88     		ldrh	r2, [r7, #2]
 265 0042 3146     		mov	r1, r6
 266 0044 01A8     		add	r0, sp, #4
 267 0046 FFF7FEFF 		bl	sprintf
 268              	.LVL28:
 107:Src/main.c    **** 	HAL_UART_Transmit(&huart1,"Counter= ", 9U, HAL_MAX_DELAY);
 269              		.loc 1 107 0
 270 004a 4FF0FF33 		mov	r3, #-1
 271 004e 0922     		movs	r2, #9
 272 0050 0E49     		ldr	r1, .L19+16
 273 0052 2046     		mov	r0, r4
 274 0054 FFF7FEFF 		bl	HAL_UART_Transmit
 275              	.LVL29:
 108:Src/main.c    **** 	HAL_UART_Transmit(&huart1,uart_buffer_u8, 4U, HAL_MAX_DELAY);
 276              		.loc 1 108 0
 277 0058 4FF0FF33 		mov	r3, #-1
 278 005c 0422     		movs	r2, #4
 279 005e 0DEB0201 		add	r1, sp, r2
 280 0062 2046     		mov	r0, r4
 281 0064 FFF7FEFF 		bl	HAL_UART_Transmit
 282              	.LVL30:
 109:Src/main.c    **** 	HAL_UART_Transmit(&huart1,uart_new_line_u8, 2U, HAL_MAX_DELAY);
 283              		.loc 1 109 0
 284 0068 4FF0FF33 		mov	r3, #-1
 285 006c 0222     		movs	r2, #2
 286 006e 2946     		mov	r1, r5
 287 0070 2046     		mov	r0, r4
 288 0072 FFF7FEFF 		bl	HAL_UART_Transmit
 289              	.LVL31:
 110:Src/main.c    **** 
 111:Src/main.c    **** }
ARM GAS  C:\Users\dragos.nicolae\AppData\Local\Temp\ccaDiVu2.s 			page 8


 290              		.loc 1 111 0
 291 0076 05B0     		add	sp, sp, #20
 292              	.LCFI6:
 293              		.cfi_def_cfa_offset 20
 294              		@ sp needed
 295 0078 F0BD     		pop	{r4, r5, r6, r7, pc}
 296              	.LVL32:
 297              	.L20:
 298 007a 00BF     		.align	2
 299              	.L19:
 300 007c 00000000 		.word	.LC0
 301 0080 00000000 		.word	huart1
 302 0084 00000000 		.word	.LC5
 303 0088 00000000 		.word	.LANCHOR0
 304 008c 10000000 		.word	.LC6
 305              		.cfi_endproc
 306              	.LFE129:
 308              		.section	.text.get_co2_adc,"ax",%progbits
 309              		.align	1
 310              		.global	get_co2_adc
 311              		.syntax unified
 312              		.thumb
 313              		.thumb_func
 314              		.fpu fpv4-sp-d16
 316              	get_co2_adc:
 317              	.LFB127:
  45:Src/main.c    **** 	HAL_ADC_Start(&hadc1);
 318              		.loc 1 45 0
 319              		.cfi_startproc
 320              		@ args = 0, pretend = 0, frame = 0
 321              		@ frame_needed = 0, uses_anonymous_args = 0
 322              	.LVL33:
 323 0000 38B5     		push	{r3, r4, r5, lr}
 324              	.LCFI7:
 325              		.cfi_def_cfa_offset 16
 326              		.cfi_offset 3, -16
 327              		.cfi_offset 4, -12
 328              		.cfi_offset 5, -8
 329              		.cfi_offset 14, -4
 330 0002 0446     		mov	r4, r0
  46:Src/main.c    **** 	HAL_Delay(DELAY_DEBUG);
 331              		.loc 1 46 0
 332 0004 224D     		ldr	r5, .L26
 333 0006 2846     		mov	r0, r5
 334              	.LVL34:
 335 0008 FFF7FEFF 		bl	HAL_ADC_Start
 336              	.LVL35:
  47:Src/main.c    **** 	calc_adc_val_u32  += HAL_ADC_GetValue(&hadc1);
 337              		.loc 1 47 0
 338 000c 0520     		movs	r0, #5
 339 000e FFF7FEFF 		bl	HAL_Delay
 340              	.LVL36:
  48:Src/main.c    **** 	if (local_counter_u16 == NUMBER_OF_MEASUREMENTS)
 341              		.loc 1 48 0
 342 0012 2846     		mov	r0, r5
 343 0014 FFF7FEFF 		bl	HAL_ADC_GetValue
 344              	.LVL37:
ARM GAS  C:\Users\dragos.nicolae\AppData\Local\Temp\ccaDiVu2.s 			page 9


 345 0018 1E4A     		ldr	r2, .L26+4
 346 001a 1368     		ldr	r3, [r2]
 347 001c 1844     		add	r0, r0, r3
 348 001e 1060     		str	r0, [r2]
  49:Src/main.c    **** 	   {
 349              		.loc 1 49 0
 350 0020 1D4B     		ldr	r3, .L26+8
 351 0022 1B88     		ldrh	r3, [r3]
 352 0024 B3F57A7F 		cmp	r3, #1000
 353 0028 06D0     		beq	.L25
  63:Src/main.c    **** 	      HAL_Delay(DELAY_DEBUG);
 354              		.loc 1 63 0
 355 002a 0133     		adds	r3, r3, #1
 356 002c 1A4A     		ldr	r2, .L26+8
 357 002e 1380     		strh	r3, [r2]	@ movhi
  64:Src/main.c    **** 	}
 358              		.loc 1 64 0
 359 0030 0520     		movs	r0, #5
 360 0032 FFF7FEFF 		bl	HAL_Delay
 361              	.LVL38:
 362              	.L21:
  68:Src/main.c    **** 
 363              		.loc 1 68 0
 364 0036 38BD     		pop	{r3, r4, r5, pc}
 365              	.LVL39:
 366              	.L25:
  51:Src/main.c    **** 	      calc_adc_val_u32 = (calc_adc_val_u32 / NUMBER_OF_MEASUREMENTS);
 367              		.loc 1 51 0
 368 0038 184D     		ldr	r5, .L26+12
 369 003a 0122     		movs	r2, #1
 370 003c 2021     		movs	r1, #32
 371 003e 2846     		mov	r0, r5
 372 0040 FFF7FEFF 		bl	HAL_GPIO_WritePin
 373              	.LVL40:
  52:Src/main.c    **** 	      Measured_value_pst->measured_value_u16 = SUBSTRACT25PROCENT(calc_adc_val_u32);
 374              		.loc 1 52 0
 375 0044 1349     		ldr	r1, .L26+4
 376 0046 0B68     		ldr	r3, [r1]
 377 0048 154A     		ldr	r2, .L26+16
 378 004a A2FB0323 		umull	r2, r3, r2, r3
 379 004e 9B09     		lsrs	r3, r3, #6
  53:Src/main.c    **** 	      ++Measured_value_pst->measurmenet_counter_u16;
 380              		.loc 1 53 0
 381 0050 03EB8302 		add	r2, r3, r3, lsl #2
 382 0054 02EB8202 		add	r2, r2, r2, lsl #2
 383 0058 1248     		ldr	r0, .L26+20
 384 005a A0FB0202 		umull	r0, r2, r0, r2
 385 005e A3EB5213 		sub	r3, r3, r2, lsr #5
 386 0062 0B60     		str	r3, [r1]
 387 0064 9BB2     		uxth	r3, r3
 388 0066 2380     		strh	r3, [r4]	@ movhi
  54:Src/main.c    **** 	      calc_adc_val_u32 = 0U;
 389              		.loc 1 54 0
 390 0068 6388     		ldrh	r3, [r4, #2]
 391 006a 0133     		adds	r3, r3, #1
 392 006c 9BB2     		uxth	r3, r3
 393 006e 6380     		strh	r3, [r4, #2]	@ movhi
ARM GAS  C:\Users\dragos.nicolae\AppData\Local\Temp\ccaDiVu2.s 			page 10


  55:Src/main.c    **** 	      local_counter_u16 = 0U;
 394              		.loc 1 55 0
 395 0070 0022     		movs	r2, #0
 396 0072 0A60     		str	r2, [r1]
  56:Src/main.c    **** 	      LED_OFF
 397              		.loc 1 56 0
 398 0074 084B     		ldr	r3, .L26+8
 399 0076 1A80     		strh	r2, [r3]	@ movhi
  57:Src/main.c    **** 	      send_data_uart(&CO2_measurement_pst);
 400              		.loc 1 57 0
 401 0078 2021     		movs	r1, #32
 402 007a 2846     		mov	r0, r5
 403 007c FFF7FEFF 		bl	HAL_GPIO_WritePin
 404              	.LVL41:
  58:Src/main.c    **** 	      air_quality_calc(&CO2_measurement_pst);
 405              		.loc 1 58 0
 406 0080 094C     		ldr	r4, .L26+24
 407              	.LVL42:
 408 0082 2046     		mov	r0, r4
 409 0084 FFF7FEFF 		bl	send_data_uart
 410              	.LVL43:
  59:Src/main.c    **** 		}
 411              		.loc 1 59 0
 412 0088 2046     		mov	r0, r4
 413 008a FFF7FEFF 		bl	air_quality_calc
 414              	.LVL44:
 415 008e D2E7     		b	.L21
 416              	.L27:
 417              		.align	2
 418              	.L26:
 419 0090 00000000 		.word	hadc1
 420 0094 00000000 		.word	.LANCHOR1
 421 0098 00000000 		.word	.LANCHOR2
 422 009c 00000240 		.word	1073872896
 423 00a0 D34D6210 		.word	274877907
 424 00a4 1F85EB51 		.word	1374389535
 425 00a8 00000000 		.word	.LANCHOR3
 426              		.cfi_endproc
 427              	.LFE127:
 429              		.section	.text.main,"ax",%progbits
 430              		.align	1
 431              		.global	main
 432              		.syntax unified
 433              		.thumb
 434              		.thumb_func
 435              		.fpu fpv4-sp-d16
 437              	main:
 438              	.LFB130:
 112:Src/main.c    **** 
 113:Src/main.c    **** 
 114:Src/main.c    **** int main(void)
 115:Src/main.c    **** {
 439              		.loc 1 115 0
 440              		.cfi_startproc
 441              		@ Volatile: function does not return.
 442              		@ args = 0, pretend = 0, frame = 0
 443              		@ frame_needed = 0, uses_anonymous_args = 0
ARM GAS  C:\Users\dragos.nicolae\AppData\Local\Temp\ccaDiVu2.s 			page 11


 444 0000 08B5     		push	{r3, lr}
 445              	.LCFI8:
 446              		.cfi_def_cfa_offset 8
 447              		.cfi_offset 3, -8
 448              		.cfi_offset 14, -4
 116:Src/main.c    **** 	HAL_Init();
 449              		.loc 1 116 0
 450 0002 FFF7FEFF 		bl	HAL_Init
 451              	.LVL45:
 117:Src/main.c    **** 	SystemClock_Config();
 452              		.loc 1 117 0
 453 0006 FFF7FEFF 		bl	SystemClock_Config
 454              	.LVL46:
 118:Src/main.c    **** 
 119:Src/main.c    **** #if (STD_ON == GPIO_ON)
 120:Src/main.c    **** 	MX_GPIO_Init();
 455              		.loc 1 120 0
 456 000a FFF7FEFF 		bl	MX_GPIO_Init
 457              	.LVL47:
 121:Src/main.c    **** #endif
 122:Src/main.c    **** 
 123:Src/main.c    **** #if (STD_ON == ADC_1)
 124:Src/main.c    **** 	MX_ADC1_Init();
 458              		.loc 1 124 0
 459 000e FFF7FEFF 		bl	MX_ADC1_Init
 460              	.LVL48:
 125:Src/main.c    **** #endif
 126:Src/main.c    **** 
 127:Src/main.c    **** #if (STD_ON == I2C_1)
 128:Src/main.c    **** 	MX_I2C1_Init();
 129:Src/main.c    **** #endif
 130:Src/main.c    **** 
 131:Src/main.c    **** #if (STD_ON == UART_1)
 132:Src/main.c    **** 	MX_USART1_UART_Init();
 461              		.loc 1 132 0
 462 0012 FFF7FEFF 		bl	MX_USART1_UART_Init
 463              	.LVL49:
 133:Src/main.c    **** 	Board_init();
 464              		.loc 1 133 0
 465 0016 FFF7FEFF 		bl	Board_init
 466              	.LVL50:
 467              	.L29:
 134:Src/main.c    **** #endif
 135:Src/main.c    **** 
 136:Src/main.c    **** 	while(1)
 137:Src/main.c    **** 	   {
 138:Src/main.c    **** 	      get_co2_adc(&CO2_measurement_pst);
 468              		.loc 1 138 0 discriminator 1
 469 001a 0248     		ldr	r0, .L31
 470 001c FFF7FEFF 		bl	get_co2_adc
 471              	.LVL51:
 472 0020 FBE7     		b	.L29
 473              	.L32:
 474 0022 00BF     		.align	2
 475              	.L31:
 476 0024 00000000 		.word	.LANCHOR3
 477              		.cfi_endproc
ARM GAS  C:\Users\dragos.nicolae\AppData\Local\Temp\ccaDiVu2.s 			page 12


 478              	.LFE130:
 480              		.section	.text._Error_Handler,"ax",%progbits
 481              		.align	1
 482              		.global	_Error_Handler
 483              		.syntax unified
 484              		.thumb
 485              		.thumb_func
 486              		.fpu fpv4-sp-d16
 488              	_Error_Handler:
 489              	.LFB131:
 139:Src/main.c    **** 	   }
 140:Src/main.c    **** 
 141:Src/main.c    **** }
 142:Src/main.c    **** 
 143:Src/main.c    **** void _Error_Handler(char *file, int line)
 144:Src/main.c    **** {
 490              		.loc 1 144 0
 491              		.cfi_startproc
 492              		@ Volatile: function does not return.
 493              		@ args = 0, pretend = 0, frame = 0
 494              		@ frame_needed = 0, uses_anonymous_args = 0
 495              		@ link register save eliminated.
 496              	.LVL52:
 497              	.L34:
 498 0000 FEE7     		b	.L34
 499              		.cfi_endproc
 500              	.LFE131:
 502              		.global	uart_new_line_u8
 503              		.global	local_counter_u16
 504              		.global	calc_adc_val_u32
 505              		.global	CO2_measurement_pst
 506              		.comm	huart1,64,4
 507              		.comm	hadc1,72,4
 508              		.section	.bss.CO2_measurement_pst,"aw",%nobits
 509              		.align	2
 510              		.set	.LANCHOR3,. + 0
 513              	CO2_measurement_pst:
 514 0000 00000000 		.space	4
 515              		.section	.bss.calc_adc_val_u32,"aw",%nobits
 516              		.align	2
 517              		.set	.LANCHOR1,. + 0
 520              	calc_adc_val_u32:
 521 0000 00000000 		.space	4
 522              		.section	.bss.local_counter_u16,"aw",%nobits
 523              		.align	1
 524              		.set	.LANCHOR2,. + 0
 527              	local_counter_u16:
 528 0000 0000     		.space	2
 529              		.section	.data.uart_new_line_u8,"aw",%progbits
 530              		.align	2
 531              		.set	.LANCHOR0,. + 0
 534              	uart_new_line_u8:
 535 0000 0D0A     		.ascii	"\015\012"
 536              		.section	.rodata.air_quality_calc.str1.4,"aMS",%progbits,1
 537              		.align	2
 538              	.LC1:
 539 0000 47524545 		.ascii	"GREEN AIR\015\012\012\000"
ARM GAS  C:\Users\dragos.nicolae\AppData\Local\Temp\ccaDiVu2.s 			page 13


 539      4E204149 
 539      520D0A0A 
 539      00
 540 000d 000000   		.space	3
 541              	.LC2:
 542 0010 474F4F44 		.ascii	"GOOD AIR\015\012\012\000"
 542      20414952 
 542      0D0A0A00 
 543              	.LC3:
 544 001c 42414420 		.ascii	"BAD AIR\015\012\012\000"
 544      4149520D 
 544      0A0A00
 545 0027 00       		.space	1
 546              	.LC4:
 547 0028 56455259 		.ascii	"VERY BAD AIR! GO OUT!\015\012\012\000"
 547      20424144 
 547      20414952 
 547      2120474F 
 547      204F5554 
 548              		.section	.rodata.debug_check.str1.4,"aMS",%progbits,1
 549              		.align	2
 550              	.LC0:
 551 0000 256400   		.ascii	"%d\000"
 552              		.section	.rodata.send_data_uart.str1.4,"aMS",%progbits,1
 553              		.align	2
 554              	.LC5:
 555 0000 434F3220 		.ascii	"CO2 V value= \000"
 555      56207661 
 555      6C75653D 
 555      2000
 556 000e 0000     		.space	2
 557              	.LC6:
 558 0010 436F756E 		.ascii	"Counter= \000"
 558      7465723D 
 558      2000
 559              		.text
 560              	.Letext0:
 561              		.file 2 "c:\\program files (x86)\\gnu tools arm embedded\\7 2018-q2-update\\arm-none-eabi\\include
 562              		.file 3 "c:\\program files (x86)\\gnu tools arm embedded\\7 2018-q2-update\\arm-none-eabi\\include
 563              		.file 4 "Drivers/CMSIS/Include/core_cm4.h"
 564              		.file 5 "Drivers/CMSIS/Device/ST/STM32F4xx/Include/system_stm32f4xx.h"
 565              		.file 6 "Drivers/CMSIS/Device/ST/STM32F4xx/Include/stm32f401xe.h"
 566              		.file 7 "c:\\program files (x86)\\gnu tools arm embedded\\7 2018-q2-update\\arm-none-eabi\\include
 567              		.file 8 "c:\\program files (x86)\\gnu tools arm embedded\\7 2018-q2-update\\arm-none-eabi\\include
 568              		.file 9 "c:\\program files (x86)\\gnu tools arm embedded\\7 2018-q2-update\\lib\\gcc\\arm-none-eab
 569              		.file 10 "c:\\program files (x86)\\gnu tools arm embedded\\7 2018-q2-update\\arm-none-eabi\\includ
 570              		.file 11 "Drivers/STM32F4xx_HAL_Driver/Inc/stm32f4xx_hal_def.h"
 571              		.file 12 "Drivers/STM32F4xx_HAL_Driver/Inc/stm32f4xx_hal_dma.h"
 572              		.file 13 "Drivers/STM32F4xx_HAL_Driver/Inc/stm32f4xx_hal_adc.h"
 573              		.file 14 "Drivers/STM32F4xx_HAL_Driver/Inc/stm32f4xx_hal_uart.h"
 574              		.file 15 "Inc/generic.h"
 575              		.file 16 "Inc/init.h"
 576              		.file 17 "Drivers/STM32F4xx_HAL_Driver/Inc/stm32f4xx_hal.h"
 577              		.file 18 "c:\\program files (x86)\\gnu tools arm embedded\\7 2018-q2-update\\arm-none-eabi\\includ
 578              		.file 19 "Drivers/STM32F4xx_HAL_Driver/Inc/stm32f4xx_hal_gpio.h"
ARM GAS  C:\Users\dragos.nicolae\AppData\Local\Temp\ccaDiVu2.s 			page 14


DEFINED SYMBOLS
                            *ABS*:00000000 main.c
C:\Users\dragos.nicolae\AppData\Local\Temp\ccaDiVu2.s:18     .text.debug_check:00000000 $t
C:\Users\dragos.nicolae\AppData\Local\Temp\ccaDiVu2.s:25     .text.debug_check:00000000 debug_check
C:\Users\dragos.nicolae\AppData\Local\Temp\ccaDiVu2.s:87     .text.debug_check:00000048 $d
                            *COM*:00000040 huart1
C:\Users\dragos.nicolae\AppData\Local\Temp\ccaDiVu2.s:94     .text.air_quality_calc:00000000 $t
C:\Users\dragos.nicolae\AppData\Local\Temp\ccaDiVu2.s:101    .text.air_quality_calc:00000000 air_quality_calc
C:\Users\dragos.nicolae\AppData\Local\Temp\ccaDiVu2.s:197    .text.air_quality_calc:00000080 $d
C:\Users\dragos.nicolae\AppData\Local\Temp\ccaDiVu2.s:206    .text.send_data_uart:00000000 $t
C:\Users\dragos.nicolae\AppData\Local\Temp\ccaDiVu2.s:213    .text.send_data_uart:00000000 send_data_uart
C:\Users\dragos.nicolae\AppData\Local\Temp\ccaDiVu2.s:300    .text.send_data_uart:0000007c $d
C:\Users\dragos.nicolae\AppData\Local\Temp\ccaDiVu2.s:309    .text.get_co2_adc:00000000 $t
C:\Users\dragos.nicolae\AppData\Local\Temp\ccaDiVu2.s:316    .text.get_co2_adc:00000000 get_co2_adc
C:\Users\dragos.nicolae\AppData\Local\Temp\ccaDiVu2.s:419    .text.get_co2_adc:00000090 $d
                            *COM*:00000048 hadc1
C:\Users\dragos.nicolae\AppData\Local\Temp\ccaDiVu2.s:430    .text.main:00000000 $t
C:\Users\dragos.nicolae\AppData\Local\Temp\ccaDiVu2.s:437    .text.main:00000000 main
C:\Users\dragos.nicolae\AppData\Local\Temp\ccaDiVu2.s:476    .text.main:00000024 $d
C:\Users\dragos.nicolae\AppData\Local\Temp\ccaDiVu2.s:481    .text._Error_Handler:00000000 $t
C:\Users\dragos.nicolae\AppData\Local\Temp\ccaDiVu2.s:488    .text._Error_Handler:00000000 _Error_Handler
C:\Users\dragos.nicolae\AppData\Local\Temp\ccaDiVu2.s:534    .data.uart_new_line_u8:00000000 uart_new_line_u8
C:\Users\dragos.nicolae\AppData\Local\Temp\ccaDiVu2.s:527    .bss.local_counter_u16:00000000 local_counter_u16
C:\Users\dragos.nicolae\AppData\Local\Temp\ccaDiVu2.s:520    .bss.calc_adc_val_u32:00000000 calc_adc_val_u32
C:\Users\dragos.nicolae\AppData\Local\Temp\ccaDiVu2.s:513    .bss.CO2_measurement_pst:00000000 CO2_measurement_pst
C:\Users\dragos.nicolae\AppData\Local\Temp\ccaDiVu2.s:509    .bss.CO2_measurement_pst:00000000 $d
C:\Users\dragos.nicolae\AppData\Local\Temp\ccaDiVu2.s:516    .bss.calc_adc_val_u32:00000000 $d
C:\Users\dragos.nicolae\AppData\Local\Temp\ccaDiVu2.s:523    .bss.local_counter_u16:00000000 $d
C:\Users\dragos.nicolae\AppData\Local\Temp\ccaDiVu2.s:530    .data.uart_new_line_u8:00000000 $d
C:\Users\dragos.nicolae\AppData\Local\Temp\ccaDiVu2.s:537    .rodata.air_quality_calc.str1.4:00000000 $d
C:\Users\dragos.nicolae\AppData\Local\Temp\ccaDiVu2.s:549    .rodata.debug_check.str1.4:00000000 $d
C:\Users\dragos.nicolae\AppData\Local\Temp\ccaDiVu2.s:553    .rodata.send_data_uart.str1.4:00000000 $d

UNDEFINED SYMBOLS
HAL_Delay
sprintf
HAL_UART_Transmit
HAL_ADC_Start
HAL_ADC_GetValue
HAL_GPIO_WritePin
HAL_Init
SystemClock_Config
MX_GPIO_Init
MX_ADC1_Init
MX_USART1_UART_Init
Board_init
